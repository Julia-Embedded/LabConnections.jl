<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Installation Instructions · LabConnections</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>LabConnections</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../examples/examples/">Examples</a></li><li><a class="toctext" href="../../examples/testing/">Tests</a></li><li><a class="toctext" href="../../">LabConnections.jl Manual</a></li><li><a class="toctext" href="../../lib/functions/">Available functions</a></li><li><a class="toctext" href="../../lib/io_devices/">Available devices</a></li><li class="current"><a class="toctext" href>Installation Instructions</a><ul class="internal"><li><a class="toctext" href="#Preparing-a-micro-SD-card-1">Preparing a micro-SD card</a></li><li><a class="toctext" href="#Flashing-the-BeagleBone-1">Flashing the BeagleBone</a></li><li><a class="toctext" href="#Trying-out-the-BeagleBone-1">Trying out the BeagleBone</a></li><li><a class="toctext" href="#Setting-up-the-host-computer-1">Setting up the host computer</a></li><li><a class="toctext" href="#Setting-up-automatic-communication-1">Setting up automatic communication</a></li><li><a class="toctext" href="#Debugging-1">Debugging</a></li></ul></li><li><a class="toctext" href="../introduction/">Introduction</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Installation Instructions</a></li></ul><a class="edit-page" href="https://github.com//blob/master/docs/src/man/installation.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Installation Instructions</span><a class="fa fa-bars" href="#"></a></div></header><p>&lt;a id=&#39;Installation-Instructions-1&#39;&gt;&lt;/a&gt;</p><h1><a class="nav-anchor" id="Installation-Instructions-1" href="#Installation-Instructions-1">Installation Instructions</a></h1><p>In these instructions we explain how to set up a working environment on a host computer and a BeagleBone Black. If you already have a prepared micro-SD card for flashing a BeagleBone,  then you can safely skip the first section of these instructions.</p><p>&lt;a id=&#39;On-the-BBB-1&#39;&gt;&lt;/a&gt;</p><h2><a class="nav-anchor" id="Preparing-a-micro-SD-card-1" href="#Preparing-a-micro-SD-card-1">Preparing a micro-SD card</a></h2><p>First, we will prepare a micro-SD card with an image of Debian and a binary of Julia, which we then can flash onto the BeagleBone. Start by downloading the Debian image <a href="http://beagleboard.org/latest-images">here</a> (Debian 9.5 2018-10-07 4GB SD IoT) and write the image onto a micro-SD card (<a href="http://derekmolloy.ie/write-a-new-image-to-the-beaglebone-black/">this guide</a> is helpful). Proceed by downloading the Julia v1.0 binary for 32-bit ARMv7 found <a href="https://julialang.org/downloads/">here</a>. Put the .tar-file of the Julia binary on the micro-SD card containing the Debian image under <code>/home/debian</code>, and unzip it.  Make sure that the Julia folder has the correct name by typing</p><pre><code class="language-none">`mv /home/debian/julia-&lt;distro specific tag&gt;/bin/julia /home/debian/julia/bin/julia&#39;</code></pre><p>The file structure on the micro-SD now has the correct structure. The final step is to make sure that the micro-SD will automatically flash the Debian image onto the BeagleBone when booting up. To do this, follow the instructions found <a href="https://elinux.org/Beagleboard:BeagleBoneBlack_Debian#Flashing_eMMC">here</a>. Congratulations, you now have a prepared micro-SD card ready for flashing BeagleBones.</p><h2><a class="nav-anchor" id="Flashing-the-BeagleBone-1" href="#Flashing-the-BeagleBone-1">Flashing the BeagleBone</a></h2><p>Insert a prepared micro-SD card in the slot on the BeagleBone, and press down the boot button S2 (the button closest to the micro-SD slot) and hold it down while you plug in the USB-cable to the BeagleBone. Keep the S2 button held down for a couple of seconds, until the onboard LEDs start to blink. After a short while the onboard LEDs should start to flash in a wave pattern, indicating that the BeagleBone is being flashed. After a while (can vary between 5-45 minutes) the BeagleBone will be turn off automatically, indicating that the flashing is complete. Remove the micro-SD before powering on the BeagleBone again (otherwise it will start to flash the BeagleBone again).</p><h2><a class="nav-anchor" id="Trying-out-the-BeagleBone-1" href="#Trying-out-the-BeagleBone-1">Trying out the BeagleBone</a></h2><p>Now your BeagleBone is ready to use. Log on to the BeagleBone via SSH by opening a terminal and typing</p><pre><code class="language-none">`ssh debian@192.168.7.2&#39;</code></pre><p>The default password is <code>temppwd</code>. You are now logged in to the BeagleBone running Debian. The Julia binary should be located at <code>/home/debian/julia-/bin/julia</code>.  You can now start a Julia REPL on the BeagleBone by typing</p><pre><code class="language-none">`/home/debian/julia-&lt;distro specific tag&gt;/bin/julia&#39;</code></pre><p>If this works correctly, then you have a functioning BeagleBone ready for use with the LabConnections.jl package.</p><p>&lt;a id=&#39;On-the-HOST-1&#39;&gt;&lt;/a&gt;</p><h2><a class="nav-anchor" id="Setting-up-the-host-computer-1" href="#Setting-up-the-host-computer-1">Setting up the host computer</a></h2><p>To get started, first install Julia v1.0.X on the host computer running a Linux distribution by following the instructions specified <a href="https://github.com/JuliaLang/julia/blob/master/README.md">here</a>. Once Julia is installed, run</p><pre><code class="language-none">using Pkg
`Pkg.clone(https://gitlab.control.lth.se/labdev/LabConnections.jl)&#39;</code></pre><p>in the Julia REPL to install all dependencies on the host computer. The source code is then located in `./julia/v1.0/LabConnections&#39;.</p><p>If you plan on working with the SPI devices to debug the ADC/DAC, then you will need a forked <code>serbus&#39; repository which wraps the</code>linux/spi/spidev&#39;. Simply</p><pre><code class="language-none">`cd &amp;&amp; cd .julia/v0.6&#39;
`git clone https://github.com/mgreiff/serbus&#39;</code></pre><p>to get the latest revision of the serbus fork.</p><p>To update the BB with the latest revision of the code,  </p><pre><code class="language-none">`cd &amp;&amp; cd .julia/v0.6/LabConnection/util&#39;
`./flash_BB.sh&#39;</code></pre><p>This scripts bundles the current code in LabCOnnections and serbus on the host computer and transfers it to the /home/debian/juliapackages directory on the BB.</p><p>&lt;a id=&#39;Setting-up-automatic-communication-1&#39;&gt;&lt;/a&gt;</p><h2><a class="nav-anchor" id="Setting-up-automatic-communication-1" href="#Setting-up-automatic-communication-1">Setting up automatic communication</a></h2><p>To setup automatic start of Julia server on the BB, make sure to have completed all prior installation instructions, and that the lates revision of the LabConnections package is located on the BB. SSH to the BeagleBone and copy the julilaserver.service to the systemd/system</p><pre><code class="language-none">`ssh debian@192.168.7.2&#39;
`sudo cp -r /home/debian/juliapackets/LabConnections/src/BeagleBone/startup/juliaserver.service /lib/systemd/system/juliaserver.service` (on the BeagleBone)</code></pre><p>Then execute the commands</p><p><code>sudo systemctl enable juliaserver</code> (on the BeagleBone) <code>sudo systemctl start juliaserver</code> (on the BeagleBone)</p><p>After a while, the BeagleBone should start blinking on SysLED 2: on-off-on-sleep-repeat. The server should now start automatically on restart of the BeagleBone, and you should be able to run the examples in in /Examples on the host computer.</p><pre><code class="language-"></code></pre><p>&lt;a id=&#39;Debugging-1&#39;&gt;&lt;/a&gt;</p><h2><a class="nav-anchor" id="Debugging-1" href="#Debugging-1">Debugging</a></h2><p>No errors will be seen on the BeagleBone when the automatic startup is used. For debugging purposes it might be useful to start the service manually on the beagle bone. Start julia as root:</p><pre><code class="language-none">sudo /home/debian/julia/bin/julia</code></pre><p>and run the startup script:</p><pre><code class="language-none">include(&quot;/home/debian/juliapackages/LabConnections/src/BeagleBone/startup/startup.jl&quot;)</code></pre><footer><hr/><a class="previous" href="../../lib/io_devices/"><span class="direction">Previous</span><span class="title">Available devices</span></a><a class="next" href="../introduction/"><span class="direction">Next</span><span class="title">Introduction</span></a></footer></article></body></html>
